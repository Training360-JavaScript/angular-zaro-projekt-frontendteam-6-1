<div class="container">
  <div class="row">
    <div *ngIf="bill$ | async as bill" class="col-12 col-lg-8 offset-lg-2">
      <h1 class="editor__title"> {{ bill.id ? 'Modify bill' : 'Create bill' }} </h1>
      <form #billForm="ngForm">

        <input [(ngModel)]="bill.id" class="form-control" name="id" type="hidden" />

        <div  class="row border mb-3">
          <div class="form-group col-4">
            <label for="orderid">OrderID</label>
            <input [(ngModel)]="bill.orderID" id="orderid" class="form-control bg-white px-1" name="orderID"
              type="number" required pattern="^[1-9][0-9]{0,}" />
            <div class="error-message" [hidden]="billForm.controls['orderID']?.valid">
              Required, numbers only!
            </div>
            <!-- {{ order$ | async | json }} -->
          </div>
          <div *ngIf="order$ | async as order" class="form-group col-8 d-flex justify-content-end">

            <div class="col-6 "><button (click)="editOrder(order)" class="btn btn-primary btn-block"><i
                  class="fa fa-pencil"></i>
                <span class="ml-2">EDIT ORDER</span></button>
            </div>
          </div>
        </div>

        <div *ngIf="customer$ | async as customer" class="row border mb-3">
          <div class="form-group col-4">
            <label for="customerid">Customer ID</label>
            <div class="d-flex mt-2">
              {{ customer.id }}
            </div>
          </div>

          <div class="form-group col-8">
            <label for="customer">Customer</label>
            <div class="d-flex mt-2">
              <div class="col-6">{{ customer.firstName }} {{ customer.lastName }}</div>
              <div class="col-6 text-center"><button (click)="editCustomer(customer)"
                  class="btn btn-primary btn-block"><i class="fa fa-pencil"></i>
                  <span class="ml-2">EDIT CUSTOMER</span></button>
              </div>
            </div>
          </div>
        </div>

        <div class="row border">
          <div class="form-group col-4">
            <label for="amount">Product amount</label>
            <div *ngIf="order$ | async as order" class="d-flex mt-2">
              <div class="col-8">{{ order.amount }}</div>
            </div>
          </div>

          <div class="form-group col-8">
            <label for="product">Product name</label>
            <div *ngIf="product$ | async as product" class="d-flex mt-2">
              <div class="col-6">{{ product.name }}</div>
              <div class="col-6"><button (click)="editProduct(product)" class="btn btn-primary btn-block"><i
                    class="fa fa-pencil"></i>
                  <span class="ml-2">EDIT PRODUCT</span></button>
              </div>
            </div>
          </div>

        </div>

        <div class="row">
          <div class="form-group col-4">
            <label for="price">Price (USD)</label>
            <input [(ngModel)]="bill.amount" class="form-control bg-white px-1" id="price" name="amount" type="number"
              required pattern="^[1-9][0-9]{0,}" />
            <div class="error-message" [hidden]="billForm.controls['amount']?.valid">
              Price required!
            </div>
          </div>

          <!-- <div class="form-group col-8">
            <label for="billStatus"> Status </label>
            <select [(ngModel)]="bill.status" id="billStatus" name="status" required class="form-control">
              <option value="" selected>Choose status...</option>
              <option value="new">New</option>
              <option value="paid">Paid</option>
            </select>
            <div class="error-message" [hidden]="billForm.controls['status']?.valid">
              Status required!
            </div>
          </div> -->

          <div class="form-group col-8">

            <label for=""> Status </label>
            <div class="row mx-2 mt-2">

              <div class="form-check form-check-radio mx-2">
                <label class="form-check-label">
                  <input [(ngModel)]="bill.status" class="form-check-input" type="radio" name="status" id="" value="new"
                    required required #name="ngModel">
                  New
                  <span class="circle">
                    <span class="check"></span>
                  </span>
                </label>
              </div>

              <div class="form-check form-check-radio ml-5">
                <label class="form-check-label">
                  <input [(ngModel)]="bill.status" class="form-check-input bg-white px-1" type="radio" name="status"
                    id="" value="paid" required #name="ngModel">
                  Paid
                  <span class="circle">
                    <span class="check"></span>
                  </span>
                </label>
              </div>

            </div>
            <div class="error-message" [hidden]="billForm.controls['status']?.valid">
              Status required!
            </div>
          </div>
        </div>

    <div class="btn-group d-flex justify-content-center mt-5">

      <button (click)="onClose(true)" class="btn btn-secondary btn-block mr-1">
        <i class="fa fa-undo"></i> <span class="ml-2">Cancel</span>
      </button>

      <button (click)="onSubmit(bill)" [disabled]="billForm.invalid" type="submit"
        class="btn btn-success btn-block ml-1">
        <i class="fa fa-save"></i> <span class="ml-2">{{ bill.id ? 'Save changes' : 'Save new' }}</span>
      </button>
    </div>
    </form>
  </div>
</div>
</div>
